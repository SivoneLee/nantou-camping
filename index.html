<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8">
  <title>å—æŠ•éœ²ç‡Ÿæ—…ç¨‹å°å·¥å…·ï½œéœ²è‡ªåœ¨ 12/1â€“12/5</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    :root {
      --bg: #f3f5f2;
      --bg-alt: #e6eee7;
      --fg: #1f2a2c;
      --muted: #6b7575;
      --accent: #3b6a5a;
      --accent-soft: #d8e9e1;
      --card-bg: #ffffff;
      --border-soft: #d4ddd7;
      --shadow-soft: 0 8px 18px rgba(0,0,0,0.06);

      --tag-eat: #f6d8c3;
      --tag-order: #f6efc3;
      --tag-souvenir: #cfe1ff;
      --tag-reserve: #f6c3d5;
      --tag-health: #d2f0d2;
    }

    * {
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }

    body {
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", system-ui, sans-serif;
      background: radial-gradient(circle at top, #e3efe7 0, #f6f8f6 45%, #f3f5f2 100%);
      color: var(--fg);
    }

    .app {
      max-width: 720px;
      margin: 0 auto;
      min-height: 100vh;
      padding-bottom: 24px;
    }

    header.app-header {
      position: sticky;
      top: 0;
      z-index: 20;
      backdrop-filter: blur(12px);
      background: linear-gradient(145deg, rgba(232,241,236,0.96), rgba(245,247,244,0.96));
      border-bottom: 1px solid rgba(180,193,187,0.5);
      padding: 12px 16px 10px;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .logo-circle {
      width: 36px;
      height: 36px;
      border-radius: 18px;
      background: radial-gradient(circle at 30% 20%, #ffffff, #c9ddcf);
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 10px rgba(0,0,0,0.08);
      font-size: 20px;
    }

    .app-title-group {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .app-title {
      font-size: 17px;
      font-weight: 700;
      letter-spacing: .02em;
    }

    .app-subtitle {
      font-size: 12px;
      color: var(--muted);
    }

    .day-tabs {
      display: flex;
      overflow-x: auto;
      gap: 8px;
      padding: 8px 12px 10px;
      background: transparent;
      scrollbar-width: none;
    }
    .day-tabs::-webkit-scrollbar { display: none; }

    .day-tab {
      flex: 0 0 auto;
      border-radius: 999px;
      padding: 6px 12px;
      font-size: 12px;
      border: 1px solid rgba(80,112,98,0.3);
      color: var(--muted);
      background: rgba(255,255,255,0.8);
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .day-tab strong {
      font-size: 13px;
      color: var(--fg);
    }

    .day-tab.active {
      background: var(--accent);
      color: #fdfefc;
      border-color: transparent;
    }
    .day-tab.active strong {
      color: #ffffff;
    }

    main {
      padding: 8px 12px 24px;
    }

    section.day-card {
      background: rgba(255,255,255,0.9);
      border-radius: 20px;
      box-shadow: var(--shadow-soft);
      margin-bottom: 16px;
      padding: 14px 14px 12px;
      border: 1px solid rgba(189,203,195,0.7);
    }

    .day-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 12px;
      margin-bottom: 10px;
    }

    .day-header-main {
      display: flex;
      flex-direction: column;
      gap: 3px;
    }

    .day-title {
      font-size: 15px;
      font-weight: 700;
      letter-spacing: .03em;
    }

    .day-subtitle {
      font-size: 12px;
      color: var(--muted);
    }

    .weather-badge {
      min-width: 120px;
      border-radius: 14px;
      padding: 6px 8px;
      background: linear-gradient(145deg, #dfece5, #eef5f1);
      display: flex;
      flex-direction: column;
      gap: 2px;
      align-items: flex-end;
      font-size: 11px;
    }

    .weather-label {
      text-transform: uppercase;
      letter-spacing: .12em;
      font-size: 10px;
      color: var(--muted);
    }

    .weather-main {
      font-size: 13px;
      font-weight: 600;
      color: var(--accent);
    }

    .weather-extra {
      font-size: 11px;
      color: var(--muted);
    }

    .chip-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 2px;
    }

    .chip-location {
      font-size: 11px;
      border-radius: 999px;
      padding: 2px 8px;
      background: var(--accent-soft);
      color: var(--accent);
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .chip-location span {
      font-size: 12px;
    }

    .badge-elev {
      font-size: 10px;
      padding: 2px 6px;
      border-radius: 999px;
      border: 1px solid rgba(99,129,116,0.3);
      color: var(--muted);
      background: rgba(250,252,250,0.9);
    }

    .card-list {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-top: 6px;
    }

    .item-card {
      border-radius: 14px;
      padding: 8px 10px;
      border: 1px solid rgba(210,219,214,0.9);
      background: rgba(250,252,251,0.95);
      display: grid;
      grid-template-columns: auto 1fr;
      column-gap: 10px;
    }

    .strip {
      width: 4px;
      border-radius: 999px;
      margin-right: 4px;
      margin-top: 2px;
    }

    .strip-sight { background: linear-gradient(180deg,#86a68d,#4d7a63); }
    .strip-food { background: linear-gradient(180deg,#f3b48a,#c97a39); }
    .strip-transport { background: linear-gradient(180deg,#9eb4c9,#5b7a9d); }

    .item-body {
      display: flex;
      flex-direction: column;
      gap: 4px;
      font-size: 13px;
    }

    .item-top {
      display: flex;
      justify-content: space-between;
      gap: 8px;
      align-items: baseline;
    }

    .item-title {
      font-weight: 600;
    }

    .item-time {
      font-size: 11px;
      color: var(--muted);
      white-space: nowrap;
    }

    .item-meta {
      font-size: 11px;
      color: var(--muted);
    }

    .item-notes {
      font-size: 12px;
      line-height: 1.4;
      color: #364240;
    }

    .tag-row {
      display: flex;
      flex-wrap: wrap;
      gap: 4px;
      margin-top: 3px;
    }

    .tag {
      font-size: 10px;
      border-radius: 999px;
      padding: 2px 6px;
      font-weight: 600;
    }
    .tag-eat { background: var(--tag-eat); }
    .tag-order { background: var(--tag-order); }
    .tag-souvenir { background: var(--tag-souvenir); }
    .tag-reserve { background: var(--tag-reserve); }
    .tag-health { background: var(--tag-health); }

    .nav-btn {
      margin-top: 6px;
      align-self: flex-start;
      border-radius: 999px;
      border: none;
      padding: 4px 10px;
      font-size: 11px;
      display: inline-flex;
      align-items: center;
      gap: 4px;
      background: #1b4e3b;
      color: #f6fbf8;
      box-shadow: 0 2px 6px rgba(0,0,0,0.15);
    }

    .nav-btn span {
      font-size: 12px;
    }

    .legend {
      margin: 12px 4px 4px;
      padding-top: 8px;
      border-top: 1px dashed rgba(170,184,176,0.7);
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      font-size: 10px;
      color: var(--muted);
    }

    .legend-pill {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      border-radius: 999px;
      padding: 2px 6px;
      background: rgba(255,255,255,0.8);
      border: 1px solid rgba(210,219,214,0.9);
    }

    .legend-pill .tag {
      margin: 0;
    }

    footer.app-footer {
      padding: 0 16px;
      font-size: 10px;
      color: var(--muted);
      text-align: center;
    }

    @media (min-width: 760px) {
      main {
        padding-inline: 20px;
      }
      section.day-card {
        padding: 16px 18px;
      }
    }
  </style>
</head>
<body>
<div class="app">
  <header class="app-header">
    <div class="logo-circle">ğŸŒ²</div>
    <div class="app-title-group">
      <div class="app-title">å—æŠ•éœ²ç‡Ÿãƒ»éœ²è‡ªåœ¨ 5D4N</div>
      <div class="app-subtitle">2025/12/1ï¼ˆä¸€ï¼‰â€“ 12/5ï¼ˆäº”ï¼‰ Â· å–®äººè‡ªé§•å°æ—…è¡Œ</div>
    </div>
  </header>

  <nav class="day-tabs" id="dayTabs"></nav>

  <main id="dayContainer"></main>

  <footer class="app-footer">
    å°æé†’ï¼šå¤©æ°£è³‡è¨Šä¾†è‡ª Open-Meteo å…è²» APIï¼Œéœ€æœ‰ç¶²è·¯æ‰èƒ½æ›´æ–°ã€‚å°èˆªæŒ‰éˆ•æœƒé–‹å•Ÿ Google Mapsã€‚
  </footer>
</div>

<script>
  // ---- è¡Œç¨‹è³‡æ–™ï¼šä½ ä¹‹å¾Œå¦‚æœè¦æ”¹ï¼Œåªè¦æ”¹é€™ä¸€æ®µ ----
  const tripDays = [
    {
      id: 'day1',
      dateLabel: '12/1',
      weekday: 'é€±ä¸€',
      title: 'å°åŒ— â†’ éœ§å³°å…‰å¾©æ–°æ‘ â†’ é¹¿è°·éœ²è‡ªåœ¨',
      subtitle: 'ä¸‹ä¸­éƒ¨ã€åƒåˆé¤ã€è£œçµ¦å¾Œä¸Šå±±å®‰é “',
      mainLocationLabel: 'é¹¿è°·ä¸€å¸¶',
      lat: 23.74639,    // é¹¿è°·é™„è¿‘åº§æ¨™
      lon: 120.7525,
      elevationNote: 'ç´„ 800â€“1,000mï¼Œæ—©æ™šåæ¶¼',
      items: [
        {
          type: 'transport',
          time: '08:30â€“11:00',
          title: 'å°åŒ—å‡ºç™¼ï¼Œèµ°åœ‹é“3å—ä¸‹',
          place: 'å°åŒ— â†’ ä¸­éƒ¨æ–¹å‘',
          notes: 'é¿é–‹æœ€å°–å³°çš„ 7â€“8 é»ï¼Œæ²¿é€”å¯åœ¨ä¼‘æ¯ç«™ä¸Šå»æ‰€ã€ä¼¸å±•ä¸€ä¸‹ã€‚',
          mapQuery: null,
          tags: []
        },
        {
          type: 'sight',
          time: '11:00â€“13:00',
          title: 'å…‰å¾©æ–°æ‘æ•£æ­¥ï¼‹åˆé¤',
          place: 'å…‰å¾©æ–°æ‘',
          address: 'è‡ºä¸­å¸‚éœ§å³°å€å’Œå¹³è·¯2-3è™Ÿ',
          notes: '1950 å¹´ä»£çœåºœå®¿èˆæ”¹å»ºçš„è€çœ·æ‘ï¼Œå··å¼„è£¡æœ‰æ–‡å‰µå°åº—èˆ‡è€æˆ¿å­ï¼Œå¾ˆé©åˆæ•£æ­¥æ‹ç…§ã€‚åˆé¤å¯æ‰¾ã€Œè”¬èœå¤šï¼‹è›‹ç™½è³ªã€çš„è¼•é£Ÿæˆ–ç±³é£Ÿï¼Œæ¾±ç²‰é‡æŠ“ä¸€ç¨®å°±å¥½ã€‚',
          mapQuery: 'å…‰å¾©æ–°æ‘ éœ§å³°',
          tags: [
            { kind: 'eat', text: 'å¿…åƒç¾é£Ÿ' },
            { kind: 'health', text: 'ç³–å‹å‹å–„é»é¤ï¼šèœå¤šé£¯å°‘' }
          ]
        },
        {
          type: 'transport',
          time: '13:00â€“13:40',
          title: 'éœ§å³° â†’ è‰å±¯æ¥“åº·',
          place: 'åœ‹3ï¼ä¸­æŠ•å…¬è·¯',
          notes: 'å¾éœ§å³°å¾€è‰å±¯æ–¹å‘ç§»å‹•ï¼Œæº–å‚™ä¸Šå±±å‰ä¸€æ¬¡è²·å¥½å¹¾å¤©è¦ç”¨çš„é£Ÿæã€‚',
          mapQuery: 'æ¥“åº·è¶…å¸‚ è‰å±¯åº—',
          tags: []
        },
        {
          type: 'food',
          time: '13:40â€“14:30',
          title: 'æ¥“åº·è¶…å¸‚è‰å±¯åº—æ¡è²·',
          place: 'æ¥“åº·è¶…å¸‚ è‰å±¯åº—',
          address: 'å—æŠ•ç¸£è‰å±¯é®ä¸­èˆˆè·¯38è™Ÿ',
          notes: 'é‡é»è²·ï¼šå¤§é‡è”¬èœã€è‡é¡ã€é›è›‹ã€é›èƒ¸è‚‰ã€è±†è…ã€ç„¡ç³–è±†æ¼¿ã€å°‘é‡åœ°ç“œæˆ–ç³™ç±³é£¯åŒ…ã€‚é›¶é£Ÿä»¥ç„¡èª¿å‘³å …æœã€æµ·è‹”ç‚ºä¸»ã€‚',
          mapQuery: 'æ¥“åº·è¶…å¸‚ è‰å±¯åº—',
          tags: [
            { kind: 'health', text: 'é«˜çº–é£Ÿæè£œçµ¦é»' }
          ]
        },
        {
          type: 'transport',
          time: '14:30â€“15:30',
          title: 'è‰å±¯ â†’ é¹¿è°· â†’ éœ²è‡ªåœ¨ç‡Ÿå€',
          place: 'è‰å±¯ / å—æŠ•å¸‚ â†’ é¹¿è°·',
          notes: 'æ²¿é€”å±±è·¯é–‹å§‹è®Šå½ï¼Œæ”¾æ…¢é€Ÿåº¦ï¼Œä¿æŒç²¾ç¥è¼•é¬†ã€‚è‹¥è‡¨æ™‚éœ€è¦å»æ‰€æˆ–å°è£œçµ¦ï¼Œå¯åœ¨é¹¿è°·å¸‚å€åœä¸€ä¸‹ã€‚',
          mapQuery: 'éœ²è‡ªåœ¨ æ‰æ—æºª éœ²ç‡Ÿå€',
          tags: []
        },
        {
          type: 'sight',
          time: '15:30 ä¹‹å¾Œ',
          title: 'æŠµé”éœ²è‡ªåœ¨ï¼Œæ­å¸³ï¼†çœ‹å±±æ”¾ç©º',
          place: 'éœ²è‡ªåœ¨ Â· æ‰æ—æºªéœ²ç‡Ÿå€',
          address: 'å—æŠ•ç¸£é¹¿è°·é„‰ç¾Šä»”ç£',
          notes: 'å…ˆæŠŠå¸³ç¯·èˆ‡ç¡çœ å€å®‰é “å¥½ï¼Œç†Ÿæ‚‰æ°´æºã€è¡›æµ´èˆ‡é›»æºä½ç½®ã€‚ç¬¬ä¸€æ™šä¸æ’å…¶ä»–è¡Œç¨‹ï¼Œè®“èº«é«”æ…¢æ…¢é€²å…¥å±±è£¡çš„ç¯€å¥ã€‚',
          mapQuery: 'éœ²è‡ªåœ¨ æ‰æ—æºª éœ²ç‡Ÿå€',
          tags: []
        }
      ]
    },
    {
      id: 'day2',
      dateLabel: '12/2',
      weekday: 'é€±äºŒ',
      title: 'ç‡Ÿåœ°å®Œå…¨æ”¾é¬†æ—¥ï¼‹å¶‹å¶‹åå’–å•¡',
      subtitle: 'åœ¨å±±è£¡é†’ä¾†çš„ä¸€å¤©ï¼Œåªæœ‰ä¸€é»å°ç§»å‹•',
      mainLocationLabel: 'é¹¿è°· Â· 151ç¸£é“ä¸€å¸¶',
      lat: 23.73,
      lon: 120.80,
      elevationNote: 'ç´„ 900â€“1,000mï¼Œæ—©æ™šéœ€ä¿æš–',
      items: [
        {
          type: 'sight',
          time: 'æ—©ä¸Š',
          title: 'ç‡Ÿå€æ™¨é–“æ…¢æ´»',
          place: 'éœ²è‡ªåœ¨ç‡Ÿå€',
          notes: 'ç¡åˆ°è‡ªç„¶é†’ã€åœ¨ç‡Ÿå€èµ°èµ°ã€çœ‹éœ§æ•£é›²èµ·ã€‚æ—©é¤å¯ä»¥æ˜¯ç„¡ç³–è±†æ¼¿ï¼‹æ°´ç…®è›‹ï¼‹å°‘é‡åœ°ç“œæˆ–åå¸ï¼Œè”¬èœå¯ä»¥é †ä¾¿ç•¶æ²™æ‹‰åƒæ‰ä¸€éƒ¨ä»½ã€‚',
          mapQuery: null,
          tags: [
            { kind: 'health', text: 'æº«å’Œæ—¥ï¼šä½å¼·åº¦è¡Œç¨‹' }
          ]
        },
        {
          type: 'food',
          time: 'ä¸­åˆ',
          title: 'ç‡Ÿåœ°ç°¡å–®åˆé¤',
          place: 'éœ²è‡ªåœ¨ç‡Ÿå€',
          notes: 'åˆ©ç”¨å‰ä¸€å¤©è²·çš„èœï¼Œåšä¸€é‹è”¬èœå¾ˆå¤šçš„æ¹¯æˆ–ç‚’èœï¼Œæ­é…å°‘é‡é£¯ï¼åœ°ç“œã€‚ç¶­æŒã€ŒåŠç›¤æ˜¯èœã€çš„ç›¤å­æ¯”ä¾‹ã€‚',
          mapQuery: null,
          tags: [
            { kind: 'health', text: 'é«˜çº–ï¼‹ä½æ²¹' }
          ]
        },
        {
          type: 'food',
          time: '14:00â€“16:30',
          title: 'å¶‹å¶‹å Tauh-Tauh-Tse å’–å•¡',
          place: 'å¶‹å¶‹åå’–å•¡',
          address: 'å—æŠ•ç¸£é¹¿è°·é„‰èˆˆç”¢è·¯76-3è™Ÿ',
          notes: 'å±±æ—è£¡çš„å°å’–å•¡é¤¨ï¼Œé©åˆå¸¶ä¸€æœ¬æ›¸æˆ–ä»€éº¼éƒ½ä¸åšã€‚å¯é¸æ‰‹æ²–å’–å•¡æˆ–ç„¡ç³–æ‹¿éµï¼Œç”œé»åªåƒå¹¾å£åšå‘³é“å³å¯ã€‚',
          mapQuery: 'å¶‹å¶‹å èˆˆç”¢è·¯',
          tags: [
            { kind: 'eat', text: 'å¿…åƒç¾é£Ÿ' },
            { kind: 'order', text: 'å¿…é»èœå–®ï¼šæ‰‹æ²–ï¼ç•¶æ—¥ç”œé»ï¼ˆå°‘é‡ï¼‰' },
            { kind: 'health', text: 'ç”œé» 1/3 åŸå‰‡' }
          ]
        },
        {
          type: 'sight',
          time: 'å‚æ™š',
          title: 'å›ç‡Ÿå€ï¼Œæ™šé¤èˆ‡å¤œé–“éœä¸‹ä¾†',
          place: 'éœ²è‡ªåœ¨ç‡Ÿå€',
          notes: 'å¯ä»¥ææ—©æ´—æ¾¡ã€ä¼¸å±•ï¼Œè®“æ™šä¸Šæœ‰å¤šä¸€é»å®Œå…¨å®‰éœçš„æ™‚é–“ã€‚æ™šé¤å¯åšè”¬èœé‹æˆ–ä¸€é‹æ–™ç†ï¼ŒæŠŠæ˜“å£çš„é£Ÿæå„ªå…ˆæ¶ˆè€—ã€‚',
          mapQuery: null,
          tags: []
        }
      ]
    },
    {
      id: 'day3',
      dateLabel: '12/3',
      weekday: 'é€±ä¸‰',
      title: 'æºªé ­è‡ªç„¶æ•™è‚²åœ’å€ï¼‹è‡ç¥ç«é‹',
      subtitle: 'åŠæ—¥æ£®æ—æ­¥é“ï¼ŒåŠæ—¥åƒè‡è‡è£œå…ƒæ°£',
      mainLocationLabel: 'æºªé ­è‡ªç„¶æ•™è‚²åœ’å€',
      lat: 23.6745,     // æºªé ­å®˜æ–¹åº§æ¨™
      lon: 120.79725,
      elevationNote: 'ç´„ 1,150mï¼Œæ°£æº«è¼ƒæ¶¼ï¼Œæ³¨æ„ä¿æš–',
      items: [
        {
          type: 'transport',
          time: '08:30â€“09:00',
          title: 'ç‡Ÿåœ°å‡ºç™¼å‰å¾€æºªé ­',
          place: 'éœ²è‡ªåœ¨ â†’ æºªé ­è‡ªç„¶æ•™è‚²åœ’å€',
          notes: 'æ²¿è‘—æ‰æ—æºªå…¬è·¯å¾€å›èµ°æ¥ 151 ç¸£é“ï¼Œå±±è·¯å½å¤šï¼Œæ…¢æ…¢é–‹ã€‚',
          mapQuery: 'æºªé ­è‡ªç„¶æ•™è‚²åœ’å€',
          tags: []
        },
        {
          type: 'sight',
          time: '09:00â€“13:00',
          title: 'æºªé ­ç«¹æ—æ­¥é“ï¼†å¤§å­¸æ± ä¸€å¸¶',
          place: 'æºªé ­è‡ªç„¶æ•™è‚²åœ’å€',
          address: 'å—æŠ•ç¸£é¹¿è°·é„‰æ£®æ—å··9è™Ÿ',
          notes: 'æ—¥æ²»æ™‚æœŸå°±æ˜¯å¯¦é©—æ—ï¼Œç¾åœ¨æ˜¯è‡ªç„¶æ•™è‚²åœ’å€ã€‚å¯èµ°å¤§å­¸æ± ã€ç¥æœ¨å€èˆ‡éƒ¨åˆ†ç©ºä¸­èµ°å»Šï¼Œé¸ 3â€“4 å°æ™‚å…§çš„è¼•é‡è·¯ç·šå³å¯ã€‚',
          mapQuery: 'æºªé ­è‡ªç„¶æ•™è‚²åœ’å€',
          tags: [
            { kind: 'sight', text: 'æ£®æ—æ­¥é“é‡é»æ—¥' }
          ]
        },
        {
          type: 'food',
          time: '13:30â€“15:00',
          title: 'è‡ç¥é¹¿è°·åº—ç«é‹',
          place: 'è‡ç¥ é¹¿è°·åº—',
          address: 'å—æŠ•ç¸£é¹¿è°·é„‰ä¸­æ­£è·¯äºŒæ®µ350è™Ÿ',
          notes: 'ä¸»æ‰“å„å¼è‡è‡é‹ï¼Œå¯ä»¥é»ç¶œåˆè‡ç›¤ï¼‹å¤§é‡é’èœã€‚ä¸»é£Ÿåªé¸ä¸€ç¨®ï¼ˆå†¬ç²‰æˆ–å°‘é‡é£¯ï¼‰ï¼Œæ¹¯ä¸è¦å–åˆ°åº•ï¼Œå¹«è¡€ç³–å’Œè…è‡Ÿæ¸›å£“ã€‚',
          mapQuery: 'è‡ç¥ é¹¿è°·åº—',
          tags: [
            { kind: 'eat', text: 'å¿…åƒç¾é£Ÿ' },
            { kind: 'order', text: 'å¿…é»èœå–®ï¼šç¶œåˆè‡ç›¤ï¼‹é’èœ' },
            { kind: 'health', text: 'æ¾±ç²‰æ¸›é‡ï¼‹å°‘å–æ¹¯' }
          ]
        },
        {
          type: 'food',
          time: 'å›ç¨‹é€”ä¸­ï¼ˆé¸æ“‡æ€§ï¼‰',
          title: 'è¦–æƒ…æ³å°‘é‡è£œçµ¦',
          place: 'é¹¿è°·ï¼å—æŠ•å¸‚',
          notes: 'å¦‚æœå†°ç®±è£¡é£Ÿæé‚„å¤ ï¼Œå°±ç›´æ¥å›ç‡Ÿåœ°ä¼‘æ¯å³å¯ï¼›è‹¥æœ‰ç¼ºï¼Œå¯ä»¥åœ¨é¹¿è°·å°è¶…å¸‚æˆ–å—æŠ•å¸‚æ¥“åº·ç°¡å–®è£œå……è”¬èœã€‚',
          mapQuery: null,
          tags: []
        },
        {
          type: 'sight',
          time: 'å‚æ™š',
          title: 'å›ç‡Ÿåœ°æ”¾é¬†ï¼Œæ•´ç†ä»Šå¤©è¡£ç‰©',
          place: 'éœ²è‡ªåœ¨ç‡Ÿå€',
          notes: 'èµ°å®Œæºªé ­å¾Œé›£å…ç–²ç´¯ï¼Œå›ç‡Ÿåœ°ä»¥ã€Œæ‹‰ç­‹ï¼‹ç†±é£²ï¼‹æ—©ç¡ã€ç‚ºä¸»ã€‚å¯ä»¥é †ä¾¿æ´—æ‰é‹å‹•é‡å¤§çš„è¡£ç‰©ï¼Œæ›åœ¨å¸³é‚Šé€šé¢¨ã€‚',
          mapQuery: null,
          tags: []
        }
      ]
    },
    {
      id: 'day4',
      dateLabel: '12/4',
      weekday: 'é€±å››',
      title: 'æ‰æ—æºªå¥èµ°ï¼‹æœ€å¾Œä¸€æ™šæ”¶å¿ƒ',
      subtitle: 'é«˜æµ·æ‹”æ£®æ—ã€ç€‘å¸ƒèˆ‡èŠ±å‰ä¸­å¿ƒ',
      mainLocationLabel: 'æ‰æ—æºªæ£®æ—ç”Ÿæ…‹æ¸¡å‡åœ’å€',
      lat: 23.63947,   // æ‰æ—æºªé™„è¿‘åº§æ¨™
      lon: 120.79221,
      elevationNote: 'ç´„ 1,600â€“1,800mï¼Œæ—¥å¤œæº«å·®å¤§',
      items: [
        {
          type: 'transport',
          time: '09:00â€“09:30',
          title: 'éœ²è‡ªåœ¨å‡ºç™¼å‰å¾€æ‰æ—æºª',
          place: 'éœ²è‡ªåœ¨ â†’ æ‰æ—æºª',
          notes: 'éœ²è‡ªåœ¨æœ¬ä¾†å°±åœ¨é€šå¾€æ‰æ—æºªçš„è·¯ä¸Šï¼Œå†å¾€ä¸Šé–‹åå¤šå…¬é‡Œå³å¯æŠµé”åœ’å€å…¥å£ã€‚',
          mapQuery: 'æ‰æ—æºªæ£®æ—ç”Ÿæ…‹æ¸¡å‡åœ’å€',
          tags: []
        },
        {
          type: 'sight',
          time: '09:30â€“14:00',
          title: 'æ‰æ—æºªæ£®æ—æ­¥é“ï¼†ç€‘å¸ƒ',
          place: 'æ‰æ—æºªæ£®æ—ç”Ÿæ…‹æ¸¡å‡åœ’å€',
          address: 'å—æŠ•ç¸£ç«¹å±±é®æºªå±±è·¯6è™Ÿ',
          notes: 'æµ·æ‹”ç´„ 1,600m çš„é«˜å±±æ£®æ—ï¼Œæ°£æº«æ¶¼çˆ½ã€‚å¯å®‰æ’èŠ±å‰ä¸­å¿ƒå‘¨é‚Šï¼‹å…¶ä¸­ä¸€æ¢ç€‘å¸ƒæ­¥é“ï¼Œç¸½é‡æ§åˆ¶åœ¨ 3â€“4 å°æ™‚å…§å³å¯ã€‚',
          mapQuery: 'æ‰æ—æºªæ£®æ—ç”Ÿæ…‹æ¸¡å‡åœ’å€',
          tags: [
            { kind: 'sight', text: 'é«˜å±±æ£®æ—ï¼†ç€‘å¸ƒ' }
          ]
        },
        {
          type: 'food',
          time: 'åˆé¤',
          title: 'åœ’å€å…§ç°¡å–®åˆé¤æˆ–è‡ªå‚™ä¹¾ç³§',
          place: 'æ‰æ—æºªåœ’å€å…§',
          notes: 'è‹¥åœ’å€é¤å»³é¸æ“‡æœ‰é™ï¼Œå¯ä»¥è‡ªå‚™æ°´ç…®è›‹ã€åœ°ç“œã€å …æœå’Œå°é»ƒç“œæ¢ç•¶åˆé¤ã€‚è¨˜å¾—å¸¶è¶³é£²æ°´ï¼Œå±±ä¸Šå¤©æ°£ä¹¾åˆæ¶¼ã€‚',
          mapQuery: null,
          tags: [
            { kind: 'health', text: 'æ­¥é“æ—¥çš„è¼•é£Ÿåˆé¤' }
          ]
        },
        {
          type: 'sight',
          time: '14:00â€“15:00',
          title: 'å›ç‡Ÿåœ°ï¼Œåˆ†æ‰¹æ”¶è£å‚™',
          place: 'éœ²è‡ªåœ¨ç‡Ÿå€',
          notes: 'å…ˆæ”¶ä¸æ€•éœ²æ°´çš„è£å‚™ï¼ˆå‚™ç”¨æ¤…ã€æ¡Œå­ã€éƒ¨åˆ†å»šå…·ï¼‰ï¼Œç¡çœ å€æœ€å¾Œä¸€æ™šä¿æŒèˆ’é©ã€‚ä¹Ÿå¯ä»¥ç•™ä¸€é»æ™‚é–“ç™¼å‘†ï¼Œè·Ÿé€™ç‰‡å±±é“åˆ¥ã€‚',
          mapQuery: 'éœ²è‡ªåœ¨ æ‰æ—æºª éœ²ç‡Ÿå€',
          tags: []
        },
        {
          type: 'food',
          time: 'æ™šé¤',
          title: 'æŠŠå‰©é¤˜é£Ÿæè®Šæˆæœ€å¾Œä¸€é‹',
          place: 'éœ²è‡ªåœ¨ç‡Ÿå€',
          notes: 'æŠŠå†°ç®±è£¡å‰©ä¸‹çš„èœã€è›‹ç™½è³ªä¸€æ¬¡è®Šæˆç«é‹æˆ–ç‚’èœï¼Œé¿å…éš”å¤©é‚„æœ‰ä¸€å †æ˜“å£é£Ÿæè¦å¸¶å›å°åŒ—ã€‚',
          mapQuery: null,
          tags: [
            { kind: 'health', text: 'æ¸…å†°ç®±æ—¥ï¼šèœæ¯”è‚‰å¤š' }
          ]
        }
      ]
    },
    {
      id: 'day5',
      dateLabel: '12/5',
      weekday: 'é€±äº”',
      title: 'é€€ç‡Ÿ â†’ è‰å±¯å·¥è—ä¸­å¿ƒ â†’ å°åŒ—',
      subtitle: 'ä¸‹å±±å‰çš„æ–‡åŒ–è£œçµ¦ï¼‹ä¼´æ‰‹ç¦®æ™‚é–“',
      mainLocationLabel: 'è‰å±¯ Â· å—æŠ•å¹³åœ°',
      lat: 23.9733,   // è‰å±¯é™„è¿‘
      lon: 120.6843,
      elevationNote: 'å¹³åœ°æ°£æº«å›æš–ï¼Œä¸Šä¸‹æº«å·®è¦ç•™æ„',
      items: [
        {
          type: 'sight',
          time: 'æ—©ä¸Š',
          title: 'æ—©é¤ï¼†æ”¶å¸³ï¼Œæº–å‚™ä¸‹å±±',
          place: 'éœ²è‡ªåœ¨ç‡Ÿå€',
          notes: 'æ—©é¤ç¶­æŒç°¡å–®ã€é«˜çº–ï¼Œæ”¶å¸³æ™‚æ³¨æ„ä¸è¦å¤ªè¶•ï¼Œä¿ç•™ä¸€é»å–˜æ¯çš„æ™‚é–“ã€‚ç›®æ¨™ 11:00 å‰é›¢é–‹ç‡Ÿå€å³å¯ã€‚',
          mapQuery: null,
          tags: []
        },
        {
          type: 'transport',
          time: 'ç´„ 11:00â€“12:00',
          title: 'éœ²è‡ªåœ¨ â†’ è‰å±¯',
          place: 'é¹¿è°· â†’ è‰å±¯',
          notes: 'å±±è·¯ä¸‹å¡å¤šï¼Œè¨˜å¾—å¤šç”¨ä½é€Ÿæª”èˆ‡å¼•æ“ç…è»Šï¼Œä¸è¦é•·æ™‚é–“ç·Šè¸©ç…è»Šã€‚',
          mapQuery: 'åœ‹ç«‹è‡ºç£å·¥è—ç ”ç©¶ç™¼å±•ä¸­å¿ƒ',
          tags: []
        },
        {
          type: 'sight',
          time: '12:00â€“14:00',
          title: 'åœ‹ç«‹è‡ºç£å·¥è—ç ”ç©¶ç™¼å±•ä¸­å¿ƒ',
          place: 'è‡ºç£å·¥è—æ–‡åŒ–åœ’å€',
          address: 'å—æŠ•ç¸£è‰å±¯é®ä¸­æ­£è·¯573è™Ÿ',
          notes: 'å¯ä»¥çœ‹ç•¶ä»£èˆ‡å‚³çµ±å·¥è—å±•ï¼Œä¹Ÿå¯ä»¥åœ¨åœ’å€è£¡æ•£æ­¥ã€‚é¤¨å…§å•†åº—æœ‰ä¸å°‘é¸ç‰©ï¼Œå¾ˆé©åˆä½œç‚ºé€™è¶Ÿæ—…è¡Œçš„ä¼´æ‰‹ç¦®èˆ‡ç´€å¿µå“ã€‚',
          mapQuery: 'åœ‹ç«‹è‡ºç£å·¥è—ç ”ç©¶ç™¼å±•ä¸­å¿ƒ',
          tags: [
            { kind: 'souvenir', text: 'å¿…è²·ä¼´æ‰‹ç¦®ï¼šå°ç£å·¥è—å“' }
          ]
        },
        {
          type: 'food',
          time: '14:10',
          title: 'ç¾å»‰ç¤¾è‰å±¯ç¢§å±±åº—å°è£œçµ¦',
          place: 'ç¾å»‰ç¤¾ è‰å±¯ç¢§å±±åº—',
          address: 'å—æŠ•ç¸£è‰å±¯é®ç¢§å±±è·¯756-5è™Ÿ',
          notes: 'è²·å›ç¨‹çš„ç„¡ç³–èŒ¶ã€æ°£æ³¡æ°´ã€å°‘é‡å …æœæˆ–è”¬èœæ£’ï¼Œè®“é«˜é€Ÿå…¬è·¯è¡Œç¨‹èˆ’æœä¸€äº›ã€‚',
          mapQuery: 'ç¾å»‰ç¤¾ è‰å±¯ç¢§å±±åº—',
          tags: [
            { kind: 'health', text: 'å›ç¨‹é›¶é£Ÿè£œçµ¦é»' }
          ]
        },
        {
          type: 'transport',
          time: '14:30 ä¹‹å¾Œ',
          title: 'è‰å±¯ä¸Šåœ‹é“ï¼Œè¿”å›å°åŒ—',
          place: 'è‰å±¯ â†’ å°åŒ—',
          notes: 'è‹¥åœ‹é“å³æ™‚è·¯æ³é¡¯ç¤ºå¾ˆå¡ï¼Œå¯ä»¥è€ƒæ…®åœ¨è‰å±¯ï¼å°ä¸­å¤šåä¸€ä¸‹ï¼Œæ™šé»å†ä¸Šé«˜é€Ÿã€‚å›åˆ°å¹³åœ°å¾Œï¼Œè¨˜å¾—èª¿æ•´è¡£è‘—èˆ‡ä¿æš–ã€‚',
          mapQuery: null,
          tags: []
        }
      ]
    }
  ];

  // ---- UI & åŠŸèƒ½ï¼šç”¢ç”Ÿå¡ç‰‡ã€å°èˆªã€å¤©æ°£ ----

  const dayContainer = document.getElementById('dayContainer');
  const dayTabs = document.getElementById('dayTabs');

  function typeToStripClass(type) {
    switch (type) {
      case 'food': return 'strip strip-food';
      case 'transport': return 'strip strip-transport';
      default: return 'strip strip-sight';
    }
  }

  function renderTrip() {
    // ç”¢ç”Ÿ Day Tabs
    tripDays.forEach((day, idx) => {
      const tab = document.createElement('button');
      tab.type = 'button';
      tab.className = 'day-tab' + (idx === 0 ? ' active' : '');
      tab.dataset.target = day.id;
      tab.innerHTML = `<strong>D${idx + 1}</strong><span>${day.dateLabel} ${day.weekday}</span>`;
      tab.addEventListener('click', () => {
        document
          .querySelectorAll('.day-tab')
          .forEach(el => el.classList.toggle('active', el === tab));
        const target = document.getElementById(day.id);
        if (target) {
          target.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
      });
      dayTabs.appendChild(tab);
    });

    // ç”¢ç”Ÿå„æ—¥å¡ç‰‡
    tripDays.forEach((day, idx) => {
      const sec = document.createElement('section');
      sec.className = 'day-card';
      sec.id = day.id;
      sec.dataset.lat = day.lat;
      sec.dataset.lon = day.lon;

      const headerHtml = `
        <div class="day-header">
          <div class="day-header-main">
            <div class="day-title">D${idx + 1} Â· ${day.title}</div>
            <div class="day-subtitle">${day.dateLabel} ${day.weekday} Â· ${day.subtitle}</div>
            <div class="chip-row">
              <div class="chip-location">ğŸ“ <span>${day.mainLocationLabel}</span></div>
              <div class="badge-elev">${day.elevationNote}</div>
            </div>
          </div>
          <div class="weather-badge">
            <div class="weather-label">WEATHER</div>
            <div class="weather-main" data-weather-main>è¼‰å…¥å¤©æ°£ä¸­â€¦</div>
            <div class="weather-extra" data-weather-extra></div>
          </div>
        </div>
      `;

      const list = document.createElement('div');
      list.className = 'card-list';

      day.items.forEach(item => {
        const card = document.createElement('div');
        card.className = 'item-card';

        const strip = document.createElement('div');
        strip.className = typeToStripClass(item.type);

        const body = document.createElement('div');
        body.className = 'item-body';

        const top = document.createElement('div');
        top.className = 'item-top';
        top.innerHTML = `
          <div class="item-title">${item.title}</div>
          <div class="item-time">${item.time || ''}</div>
        `;

        const meta = document.createElement('div');
        meta.className = 'item-meta';
        const place = item.place ? item.place : '';
        const addr = item.address ? ` Â· ${item.address}` : '';
        meta.textContent = place + addr;

        const notes = document.createElement('div');
        notes.className = 'item-notes';
        notes.textContent = item.notes || '';

        const tagRow = document.createElement('div');
        tagRow.className = 'tag-row';
        (item.tags || []).forEach(t => {
          const span = document.createElement('span');
          span.className = 'tag ' + (t.kind ? ('tag-' + t.kind) : '');
          span.textContent = t.text;
          tagRow.appendChild(span);
        });

        body.appendChild(top);
        if (place || addr) body.appendChild(meta);
        if (item.notes) body.appendChild(notes);
        if ((item.tags || []).length) body.appendChild(tagRow);

        if (item.mapQuery) {
          const btn = document.createElement('button');
          btn.type = 'button';
          btn.className = 'nav-btn';
          btn.dataset.query = item.mapQuery;
          btn.innerHTML = `<span>ğŸš— å°èˆª</span>`;
          btn.addEventListener('click', () => openInMaps(item.mapQuery));
          body.appendChild(btn);
        }

        card.appendChild(strip);
        card.appendChild(body);
        list.appendChild(card);
      });

      sec.innerHTML = headerHtml;
      sec.appendChild(list);
      dayContainer.appendChild(sec);
    });

    // æ¨™ç±¤ legend
    const legend = document.createElement('div');
    legend.className = 'legend';
    legend.innerHTML = `
      <div class="legend-pill"><span class="tag tag-eat">å¿…åƒç¾é£Ÿ</span> å¿…åšåº—å®¶æˆ–æ–™ç†</div>
      <div class="legend-pill"><span class="tag tag-order">å¿…é»èœå–®</span> å„ªå…ˆè€ƒæ…®çš„å“é …</div>
      <div class="legend-pill"><span class="tag tag-souvenir">å¿…è²·ä¼´æ‰‹ç¦®</span> é©åˆå¸¶å›å®¶çš„æ±è¥¿</div>
      <div class="legend-pill"><span class="tag tag-reserve">é‡è¦é ç´„ä»£è™Ÿ</span> éœ€äº‹å…ˆé ç´„æˆ–ç•™æ„çš„è³‡è¨Š</div>
      <div class="legend-pill"><span class="tag tag-health">ç³–å‹å‹å–„</span> ç‰¹åˆ¥æ³¨æ„è¡€ç³–èˆ‡é«”åŠ›çš„æé†’</div>
    `;
    dayContainer.appendChild(legend);
  }

  function openInMaps(query) {
    if (!query) return;
    const url = 'https://www.google.com/maps/search/?api=1&query=' + encodeURIComponent(query);
    window.open(url, '_blank');
  }

  // ---- å¤©æ°£ï¼šä½¿ç”¨ Open-Meteo API è®€å–ç›®å‰å¤©æ°£ ----
  const weatherCodeText = (code) => {
    if (code === 0) return 'æ™´æœ—';
    if ([1,2,3].includes(code)) return 'å¤šé›²ï¼é™°';
    if ([45,48].includes(code)) return 'æœ‰éœ§';
    if ([51,53,55].includes(code)) return 'æ¯›æ¯›é›¨';
    if ([61,63,65].includes(code)) return 'ä¸‹é›¨';
    if ([80,81,82].includes(code)) return 'é™£é›¨';
    if (code === 95) return 'é›·é›¨';
    if ([96,99].includes(code)) return 'é›·é›¨å¤¾é›¹';
    return '';
  };

  async function loadWeather() {
    const sections = document.querySelectorAll('.day-card');
    for (const sec of sections) {
      const lat = sec.dataset.lat;
      const lon = sec.dataset.lon;
      const mainEl = sec.querySelector('[data-weather-main]');
      const extraEl = sec.querySelector('[data-weather-extra]');
      if (!lat || !lon || !mainEl) continue;
      mainEl.textContent = 'è¼‰å…¥å¤©æ°£ä¸­â€¦';
      extraEl.textContent = '';

      try {
        const url = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current=temperature_2m,relative_humidity_2m,weather_code&timezone=Asia%2FTaipei`;
        const res = await fetch(url);
        if (!res.ok) throw new Error('network');
        const data = await res.json();
        if (!data.current) {
          mainEl.textContent = 'å¤©æ°£è³‡æ–™æš«æ™‚ç„¡æ³•å–å¾—';
          return;
        }
        const t = Math.round(data.current.temperature_2m);
        const rh = data.current.relative_humidity_2m;
        const code = data.current.weather_code;
        const desc = weatherCodeText(code);
        mainEl.textContent = `${t}Â°C Â· ${desc || 'å³æ™‚å¤©æ°£'}`;
        extraEl.textContent = `ç›¸å°æ¿•åº¦ç´„ ${rh}%`;
      } catch (e) {
        mainEl.textContent = 'å¤©æ°£è³‡æ–™æš«æ™‚ç„¡æ³•å–å¾—';
        extraEl.textContent = '';
      }
    }
  }

  document.addEventListener('DOMContentLoaded', () => {
    renderTrip();
    loadWeather();
  });
</script>
</body>
</html>
